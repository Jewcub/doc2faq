const testHTML = `'<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css"> .lst-kix_bxro9663fv1u-6 > li:before{content:"●  "}.lst-kix_bxro9663fv1u-5 > li:before{content:"■  "}.lst-kix_bxro9663fv1u-7 > li:before{content:"○  "}.lst-kix_q9sn4uyx1qux-5 > li:before{content:"■  "}.lst-kix_q9sn4uyx1qux-7 > li:before{content:"○  "}.lst-kix_bxro9663fv1u-4 > li:before{content:"○  "}.lst-kix_bxro9663fv1u-8 > li:before{content:"■  "}.lst-kix_q9sn4uyx1qux-6 > li:before{content:"●  "}.lst-kix_q9sn4uyx1qux-3 > li:before{content:"●  "}.lst-kix_q9sn4uyx1qux-4 > li:before{content:"○  "}.lst-kix_o479q88lcowc-8 > li:before{content:"■  "}.lst-kix_bxro9663fv1u-0 > li:before{content:"●  "}.lst-kix_q9sn4uyx1qux-2 > li:before{content:"■  "}.lst-kix_bxro9663fv1u-2 > li:before{content:"■  "}.lst-kix_bxro9663fv1u-1 > li:before{content:"○  "}.lst-kix_bxro9663fv1u-3 > li:before{content:"●  "}.lst-kix_q9sn4uyx1qux-1 > li:before{content:"○  "}.lst-kix_q9sn4uyx1qux-0 > li:before{content:"●  "}ul.lst-kix_o479q88lcowc-8{list-style-type:none}ul.lst-kix_o479q88lcowc-7{list-style-type:none}.lst-kix_cuzokomt0a8m-0 > li:before{content:"●  "}.lst-kix_cuzokomt0a8m-1 > li:before{content:"○  "}.lst-kix_q9sn4uyx1qux-8 > li:before{content:"■  "}.lst-kix_cuzokomt0a8m-6 > li:before{content:"●  "}.lst-kix_cuzokomt0a8m-8 > li:before{content:"■  "}.lst-kix_cuzokomt0a8m-5 > li:before{content:"■  "}.lst-kix_cuzokomt0a8m-2 > li:before{content:"■  "}.lst-kix_cuzokomt0a8m-4 > li:before{content:"○  "}.lst-kix_cuzokomt0a8m-3 > li:before{content:"●  "}ul.lst-kix_cuzokomt0a8m-0{list-style-type:none}ul.lst-kix_cuzokomt0a8m-6{list-style-type:none}ul.lst-kix_o479q88lcowc-6{list-style-type:none}ul.lst-kix_cuzokomt0a8m-5{list-style-type:none}ul.lst-kix_o479q88lcowc-5{list-style-type:none}ul.lst-kix_cuzokomt0a8m-8{list-style-type:none}ul.lst-kix_o479q88lcowc-4{list-style-type:none}ul.lst-kix_cuzokomt0a8m-7{list-style-type:none}ul.lst-kix_o479q88lcowc-3{list-style-type:none}ul.lst-kix_cuzokomt0a8m-2{list-style-type:none}ul.lst-kix_o479q88lcowc-2{list-style-type:none}ul.lst-kix_cuzokomt0a8m-1{list-style-type:none}ul.lst-kix_o479q88lcowc-1{list-style-type:none}ul.lst-kix_cuzokomt0a8m-4{list-style-type:none}ul.lst-kix_o479q88lcowc-0{list-style-type:none}ul.lst-kix_cuzokomt0a8m-3{list-style-type:none}.lst-kix_cuzokomt0a8m-7 > li:before{content:"○  "}ul.lst-kix_bxro9663fv1u-3{list-style-type:none}.lst-kix_o479q88lcowc-1 > li:before{content:"○  "}ul.lst-kix_bxro9663fv1u-2{list-style-type:none}ul.lst-kix_bxro9663fv1u-1{list-style-type:none}.lst-kix_o479q88lcowc-0 > li:before{content:"●  "}.lst-kix_o479q88lcowc-2 > li:before{content:"■  "}ul.lst-kix_bxro9663fv1u-0{list-style-type:none}ul.lst-kix_bxro9663fv1u-7{list-style-type:none}.lst-kix_7sqe13j23tne-1 > li:before{content:"○  "}ul.lst-kix_bxro9663fv1u-6{list-style-type:none}ul.lst-kix_bxro9663fv1u-5{list-style-type:none}.lst-kix_7sqe13j23tne-0 > li:before{content:"●  "}ul.lst-kix_bxro9663fv1u-4{list-style-type:none}.lst-kix_o479q88lcowc-6 > li:before{content:"●  "}ul.lst-kix_bxro9663fv1u-8{list-style-type:none}.lst-kix_7sqe13j23tne-3 > li:before{content:"●  "}.lst-kix_o479q88lcowc-7 > li:before{content:"○  "}.lst-kix_7sqe13j23tne-2 > li:before{content:"■  "}ul.lst-kix_7sqe13j23tne-8{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-8{list-style-type:none}ul.lst-kix_7sqe13j23tne-7{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-7{list-style-type:none}.lst-kix_7sqe13j23tne-5 > li:before{content:"■  "}.lst-kix_7sqe13j23tne-7 > li:before{content:"○  "}ul.lst-kix_q9sn4uyx1qux-4{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-3{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-6{list-style-type:none}.lst-kix_7sqe13j23tne-4 > li:before{content:"○  "}.lst-kix_7sqe13j23tne-8 > li:before{content:"■  "}ul.lst-kix_q9sn4uyx1qux-5{list-style-type:none}.lst-kix_o479q88lcowc-5 > li:before{content:"■  "}ul.lst-kix_7sqe13j23tne-0{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-0{list-style-type:none}.lst-kix_o479q88lcowc-4 > li:before{content:"○  "}ul.lst-kix_7sqe13j23tne-2{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-2{list-style-type:none}ul.lst-kix_7sqe13j23tne-1{list-style-type:none}ul.lst-kix_q9sn4uyx1qux-1{list-style-type:none}.lst-kix_o479q88lcowc-3 > li:before{content:"●  "}ul.lst-kix_7sqe13j23tne-4{list-style-type:none}ul.lst-kix_7sqe13j23tne-3{list-style-type:none}ul.lst-kix_7sqe13j23tne-6{list-style-type:none}ul.lst-kix_7sqe13j23tne-5{list-style-type:none}.lst-kix_7sqe13j23tne-6 > li:before{content:"●  "}</style></head><body style="background-color:#ffffff;padding:72pt 72pt 72pt 72pt;max-width:468pt"><ul class="lst-kix_o479q88lcowc-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Section 1</span></li></ul><ul class="lst-kix_o479q88lcowc-1 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Q1</span></li></ul><ul class="lst-kix_o479q88lcowc-2 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A1</span></li></ul><ul class="lst-kix_o479q88lcowc-3 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 1</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 2</span></li></ul><ul class="lst-kix_o479q88lcowc-1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Q2</span></li></ul><ul class="lst-kix_o479q88lcowc-2 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>A1 </span><span style="font-weight:700">bold</span><span>&nbsp;</span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline">underlined</span><span>&nbsp;</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">italic</span></li></ul><ul class="lst-kix_o479q88lcowc-3 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 1</span></li></ul><ul class="lst-kix_o479q88lcowc-2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A2</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A3</span></li></ul><ul class="lst-kix_o479q88lcowc-0" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Section 2</span></li></ul><ul class="lst-kix_o479q88lcowc-1 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Q1</span></li></ul><ul class="lst-kix_o479q88lcowc-2 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A1</span></li></ul><ul class="lst-kix_o479q88lcowc-3 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 1</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 2</span></li></ul><ul class="lst-kix_o479q88lcowc-1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Q2</span></li></ul><ul class="lst-kix_o479q88lcowc-2 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A1</span></li></ul><ul class="lst-kix_o479q88lcowc-3 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sub 1</span></li></ul><ul class="lst-kix_o479q88lcowc-2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A2</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A3</span></li></ul></body></html>'`;
import cheerio = require('cheerio');

import parseHTML, { preFormat } from './parseHTML';
describe('HTML Parser', () => {
  const result = parseHTML(testHTML);
  result.sections.forEach((section) => console.log(section));
  console.log({ result });
  it('returns a result', () => {
    expect(result).toBeTruthy();
  });
  it('pre formatter replaces google styles and classes', () => {
    const preFormatted = preFormat(testHTML);
    // console.log({ preFormatted });
    expect(
      !preFormatted.includes('style') &&
        !preFormatted.includes('head') &&
        !preFormatted.includes('meta') &&
        !preFormatted.includes('font-weight') &&
        !preFormatted.includes('text-decoration') &&
        !preFormatted.includes('font-style'),
    ).toBeTruthy();
    expect(
      preFormatted.includes('g-bold') &&
        preFormatted.includes('g-italic') &&
        preFormatted.includes('g-underline'),
    ).toBeTruthy();
    expect(!preFormatted.includes('cowc-')).toBeTruthy();
    expect(
      preFormatted.includes('faq-section') &&
        preFormatted.includes('faq-question') &&
        preFormatted.includes('faq-answer') &&
        preFormatted.includes('faq-sub-p'),
    ).toBeTruthy();
  });
  it('returns the right amount of sections', () => {
    expect(result.sections.length).toBe(2);
  });
  it('returns the right amount of  questions', () => {
    let questionCount = 0;
    result.sections.forEach((section) => {
      section.QAndAs.forEach(() => questionCount++);
    });
    expect(questionCount).toBe(4);
  });
  it('returns the right amount of answers', () => {
    let answerCount = 0;
    result.sections.forEach((section) => {
      section.QAndAs.forEach((question) => {
        question.answers.forEach(() => answerCount++);
      });
    });
    expect(answerCount).toBe(8);
  });
});
